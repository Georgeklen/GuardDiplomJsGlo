(()=>{"use strict";(()=>{const e=document.querySelector(".open-popup"),t=document.querySelectorAll(".head-main .callback-btn"),o=document.querySelector(".fixed-gift"),n=document.querySelectorAll(".popup"),r=e=>{e.preventDefault();let t=e.target.dataset.popup,o=document.querySelector(t),n=o.querySelector("form"),r=o.querySelector(".status");o.style.display="block",n.style.display="block",r&&r.remove()},i=e=>{let t=e.target;(t.matches(".overlay")||t.matches(".close_icon")||t.matches(".close-btn"))&&(t.closest(".popup").style.display="none")};e.addEventListener("click",r),t.forEach((e=>{e.addEventListener("click",r)})),n.forEach((e=>{e.addEventListener("click",i)})),o&&o.addEventListener("click",(()=>{document.querySelector("#gift").style.display="block",o.remove()})),(()=>{const e=document.querySelector(".head-main"),t=document.querySelector(".clubs-list"),o=t.querySelector("ul");e.addEventListener("click",(e=>{e.target.parentNode===t&&("block"!==o.style.display?o.style.display="block":o.style.display="none")}))})()})(),(()=>{const e=/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/;document.querySelectorAll("form").forEach((e=>{for(let t of e.elements)t.required="",t.addEventListener("input",(()=>{"name"===t.name&&"Промокод"!==t.placeholder?t.value=t.value.replace(/[^а-яё\s]/gi,""):"name"===t.name&&"Промокод"===t.placeholder?t.value=t.value.replace(/[^а-яё\s\d]/gi,""):"phone"===t.name&&(t.value=t.value.replace(/[^\+\-\(\)\s\d]/gi,""))}))})),console.log("asd");const t=e=>{e.classList.remove("error")},o=e=>{e.classList.add("error")};(()=>{const e=document.createElement("style");document.head.appendChild(e),e.textContent="\n          body input.error ,\n          #card_order input.error,\n          footer #callback_footer_form-phone.error,\n          #banner-form input.error,\n          .popup .form-content input[type='tel'].error,\n          .popup .form-content input[type='text'].error{\n              border: 2px solid red;\n          }\n      "})();const n=e=>{if(!e.querySelector(".confirm-error")){const t=e.querySelector(".personal-data"),o=e.querySelector(".choose-club");let n=document.createElement("div");n.classList.add("confirm-error"),n.style.cssText="font-size: 12px; color: red; padding-top: 10px;;",t?(n.textContent="Необходимо подтвердить ОБРАБОТКУ ПЕРСОНАЛЬНЫХ ДАННЫХ!",t.insertAdjacentElement("afterend",n)):o&&(n.textContent="Выберите клуб из предложенных!",o.appendChild(n))}},r=e=>{e.querySelector(".confirm-error")&&e.querySelector(".confirm-error").remove()},i=e=>{e.style.cssText="\n      font-size: 20px;\n      color: #fff; \n      text-transform: uppercase;\n          "},l=document.createElement("div");l.style.cssText="font-size: 2rem; color: #fff",document.querySelectorAll("form").forEach((c=>{c.addEventListener("submit",(a=>{let d=a.target;const p=d.querySelector('input[type="checkbox"]'),h=document.querySelector("#thanks"),u=h.querySelector(".form-content"),m=document.querySelector("#footer_form"),y=document.querySelector("html").id,f=document.querySelector("#price-total"),v=document.querySelector("#card_order");a.preventDefault();const S=new FormData(c);let g={},k=0;if(a.target===m){if(!(e=>{for(var t=0;t<e.length;t++)if(e[t].checked)return!0;return!1})(m))return void n(m);r(m)}if((n=>{for(let r of n.target.elements){if("phone"===r.name&&!e.test(r.value))return r.placeholder="+7 (XXX) XXX-XX-XX",r.style.color="red",o(r),!1;if("phone"===r.name||e.test(r.value))return t(r),!0;if("name"===r.name&&"Промокод"!==r.placeholder&&""===r.value.trim())return o(r),!1;"name"===r.name&&"Промокод"!==r.placeholder&&""!==r.value.trim()&&t(r)}})(a)){if(S.forEach(((e,t)=>{"form_name"!==t&&("name"===t?e&&(g[t+k]=e,k++):g[t]=e)})),p&&!0===p.checked)g[p.type]=p.value,l.textContent="идет отправка...";else if(p&&!p.checked)return void n(d);y&&c===v&&c!==m&&(g["club-name"]=y),r(d),c.appendChild(l),s(g).then((e=>{if(200!==e.status)throw new Error("status network not 200");"form2"===c.id||"form1"===c.id?(c.innerHTML="<h4>Записаться на визит</h4>\n                                              <p>Ваша заявка отправлена.         Мы свяжемся с вами в ближайшее время</p>",i(c)):(h.style.display="block",[...c.elements].forEach((e=>{"name"===e.name||"phone"===e.name?e.value="":"checkbox"===e.type?e.checked=!1:e&&(e.checked=!1,null!==e.getAttribute("checked")&&(e.checked=!0))})),f&&(f.textContent="1999")),l.textContent=""})).catch((e=>{"form2"===c.id||"form1"===c.id?(c.innerHTML="<h4>Записаться на визит</h4>\n                                              <p>ошибка</p>\n                                              <p>Отправка не вышла!</p>",i(c)):(h.style.display="block",u.innerHTML="<h4>Ошибка</h4>\n                                                      <p>Отправка не вышла!</p>",u.style.cssText=" \n                          display: block;"),l.textContent=""}))}}))}));const s=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})})(),(()=>{try{const e=document.getElementById("totop"),t=document.querySelector("#clubs > .wrapper"),o=document.querySelector(".breadcrumbs");let n;window.addEventListener("scroll",(()=>{t&&(n=t.getBoundingClientRect().top),o&&(n=o.getBoundingClientRect().top),e.style.display=n<=100?"block":"none"}))}catch(e){console.warn("windowScroll.js",e)}})(),(()=>{const e=document.querySelector(".top-menu"),t=document.querySelector(".menu-button").querySelector("img"),o=document.querySelector(".popup-menu"),n=document.querySelectorAll("section"),r=document.getElementById("totop"),i=()=>{const t=document.documentElement.clientWidth,o=document.documentElement.scrollTop,i=n[1].getBoundingClientRect().top;t<768&&o>200?e.classList.add("menu-fix"):e.classList.remove("menu-fix"),i<window.innerHeight?r.style.display="block":r.style.display="none"};i(),window.addEventListener("resize",i),window.addEventListener("scroll",i),t.addEventListener("click",(()=>{o.style.display="flex"})),o.addEventListener("click",(e=>{e.target.matches("a, img")&&(o.style.display="none")}))})(),(()=>{const e=document.getElementById("card_order"),t=document.getElementById("price-total"),o=e.querySelector(".price input");let n="1",r="mozaika",i=!1;if(t){e.addEventListener("click",(e=>{let t=e.target;t.matches("input")&&t.closest(".time")?n=t.value:t.matches("input")&&t.closest(".club")&&(r=t.value),l(n,r,i)})),o.addEventListener("input",(()=>{i="ТЕЛО2019"===o.value,l(n,r,i)}));const l=(e="1",o="mozaika",n=!1)=>{let r;if("mozaika"===o)switch(e){case"1":r=1999;break;case"6":r=9900;break;case"9":r=13900;break;case"12":r=19900}else if("schelkovo"===o)switch(e){case"1":r=2999;break;case"6":r=14990;break;case"9":r=21990;break;case"12":r=24990}n&&(r*=.7),t.textContent=Math.ceil(r)};l()}})(),new class{constructor({main:e,wrap:t,next:o,prev:n,infinity:r=!1,position:i=0,slidesToShow:l=5,responsive:s=[]}){this.main=document.querySelector(e),this.wrap=document.querySelector(t),this.extraBlock=document.querySelector(".extra-block"),this.slides=this.extraBlock.querySelectorAll(".slide"),this.next=document.querySelector(o),this.prev=document.querySelector(n),this.slidesToShow=l,this.options={position:i,widthSlide:Math.floor(100/this.slidesToShow),infinity:r},this.responsive=s}init(){this.addStyle(),this.controlSlider(),this.responsive&&this.responseInit()}addStyle(){let e=document.getElementById("sliderCarusel-style");e||(e=document.createElement("style"),e.id="sliderCarousel-style"),e.textContent=`\n        .services-slider {\n                overflow: hidden !important\n            }\n            .extra-block {\n                display: flex !important;\n                transition: transform 0.5s;\n                will-change: transform;\n            }\n            .extra-block .slide {\n                flex: 0 0 ${this.options.widthSlide}% !important;\n                margin: auto 0 !important;\n            }\n        `,document.head.appendChild(e),this.extraBlock.style.transform=`translateX(-${this.options.position*this.options.widthSlide}%)`}controlSlider(){this.prev.addEventListener("click",this.prevSlider.bind(this)),this.next.addEventListener("click",this.nextSlider.bind(this))}prevSlider(){(this.options.infinity||this.options.position>0)&&(--this.options.position,this.options.position<0&&(this.options.position=this.slides.length-this.slidesToShow),this.extraBlock.style.transform=`translateX(-${this.options.position*this.options.widthSlide}%)`)}nextSlider(){(this.options.infinity||this.options.position<this.slides.length-this.slidesToShow)&&(++this.options.position,this.options.position>this.slides.length-this.slidesToShow&&(this.options.position=0),this.extraBlock.style.transform=`translateX(-${this.options.position*this.options.widthSlide}%)`)}responseInit(){const e=this.slidesToShow,t=this.responsive.map((e=>e.breakpoint)),o=Math.max(...t),n=()=>{const n=document.documentElement.clientWidth;if(n<o)for(let e=0;e<t.length;e++)n<t[e]&&(this.slidesToShow=this.responsive[e].slideToShow,this.options.widthSlide=Math.floor(100/this.slidesToShow),this.addStyle());else this.slidesToShow=e,this.options.widthSlide=Math.floor(100/this.slidesToShow),this.addStyle()};n(),window.addEventListener("resize",n)}}({prev:"#arrow-left",next:"#arrow-right",responsive:[{breakpoint:1024,slideToShow:3},{breakpoint:576,slideToShow:1}]}).init(),(()=>{const e=document.getElementById("gallery"),t=e.querySelectorAll(".slide"),o=e.querySelector(".slider-dots"),n=document.createElement("ul");let r,i,l,s=0;o.appendChild(n);for(let e=0;e<t.length;e++)r=document.createElement("li"),r.classList.add("li"),i=document.createElement("button"),i.classList.add("portfolio-btn"),r.appendChild(i),n.appendChild(r);const c=document.querySelectorAll(".li"),a=document.querySelectorAll(".portfolio-btn");c[0].classList.add("slick-active");const d=(e,t,o)=>{e[t].classList.remove(o)},p=(e,t,o)=>{e[t].classList.add(o)},h=()=>{d(c,s,"slick-active"),d(t,s,"slide-active"),s++,s>=t.length&&(s=0),p(c,s,"slick-active"),p(t,s,"slide-active")},u=(e=2e3)=>{l=setInterval(h,e)};e.addEventListener("click",(e=>{e.preventDefault();const o=e.target;o.matches(".portfolio-btn, #arrow-right-gallery, #arrow-left-gallery")&&(d(c,s,"slick-active"),d(t,s,"slide-active"),o.matches("#arrow-right-gallery")?s++:o.matches("#arrow-left-gallery")?s--:o.matches(".portfolio-btn")&&a.forEach(((e,t)=>{e===o&&(s=t)})),s>=t.length?s=0:s<0&&(s=t.length-1),p(c,s,"slick-active"),p(t,s,"slide-active"))})),e.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches("#arrow-left-gallery")||e.target.matches("#arrow-right-gallery"))&&clearInterval(l)})),e.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches("#arrow-left-gallery")||e.target.matches("#arrow-right-gallery"))&&u()})),u(2e3)})(),(()=>{const e=document.querySelector(".main-slider").querySelectorAll(".slide");let t=0;setInterval((()=>{var o,n;e[t].style.display="none",t++,t>=e.length&&(t=0),(o=e)[n=t].style.display="block",o[n].style.display="-webkit-box"}),2e3)})()})();