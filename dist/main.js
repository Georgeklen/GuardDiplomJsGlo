(()=>{"use strict";(()=>{const e=/^\+?[78](\s|-)?\(?\d{3}\)?\s?(-*\d){7}$/;document.querySelectorAll("form").forEach((e=>{for(let t of e.elements)t.required="",t.addEventListener("input",(()=>{"name"===t.name&&"Промокод"!==t.placeholder?t.value=t.value.replace(/[^а-яё\s]/gi,""):"name"===t.name&&"Промокод"===t.placeholder?t.value=t.value.replace(/[^а-яё\s\d]/gi,""):"phone"===t.name&&(t.value=t.value.replace(/[^\+\-\(\)\s\d]/gi,""))}))})),console.log("asd");const t=e=>{e.classList.remove("error")},o=e=>{e.classList.add("error")};(()=>{const e=document.createElement("style");document.head.appendChild(e),e.textContent="\n          body input.error ,\n          #card_order input.error,\n          footer #callback_footer_form-phone.error,\n          #banner-form input.error,\n          .popup .form-content input[type='tel'].error,\n          .popup .form-content input[type='text'].error{\n              border: 2px solid red;\n          }\n      "})();const n=e=>{if(!e.querySelector(".confirm-error")){const t=e.querySelector(".personal-data"),o=e.querySelector(".choose-club");let n=document.createElement("div");n.classList.add("confirm-error"),n.style.cssText="font-size: 1rem; color: red;",t?(n.textContent="Необходимо подтвердить ОБРАБОТКУ ПЕРСОНАЛЬНЫХ ДАННЫХ!",t.insertAdjacentElement("afterend",n)):o&&(n.textContent="Выберите клуб из предложенных!",o.appendChild(n))}},s=e=>{e.querySelector(".confirm-error")&&e.querySelector(".confirm-error").remove()},i=e=>{e.style.cssText="\n      font-size: 20px;\n      color: #fff; \n      text-transform: uppercase;\n          "},r=document.createElement("div");r.style.cssText="font-size: 2rem; color: #fff",document.querySelectorAll("form").forEach((c=>{c.addEventListener("submit",(a=>{let d=a.target;const p=d.querySelector('input[type="checkbox"]'),h=document.querySelector("#thanks"),m=h.querySelector(".form-content"),u=document.querySelector("#footer_form"),y=document.querySelector("html").id,f=document.querySelector("#price-total"),v=document.querySelector("#card_order");a.preventDefault();const S=new FormData(c);let g={},k=0;if(a.target===u){if(!(e=>{for(var t=0;t<e.length;t++)if(e[t].checked)return!0;return!1})(u))return void n(u);s(u)}if((n=>{for(let s of n.target.elements){if("phone"===s.name&&!e.test(s.value))return s.placeholder="+7 (XXX) XXX-XX-XX",s.style.color="red",o(s),!1;if("phone"===s.name||e.test(s.value))return t(s),!0;if("name"===s.name&&"Промокод"!==s.placeholder&&""===s.value.trim())return o(s),!1;"name"===s.name&&"Промокод"!==s.placeholder&&""!==s.value.trim()&&t(s)}})(a)){if(S.forEach(((e,t)=>{"form_name"!==t&&("name"===t?e&&(g[t+k]=e,k++):g[t]=e)})),p&&!0===p.checked)g[p.type]=p.value,r.textContent="идет отправка...";else if(p&&!p.checked)return void n(d);y&&c===v&&c!==u&&(g["club-name"]=y),s(d),c.appendChild(r),l(g).then((e=>{if(200!==e.status)throw new Error("status network not 200");"form2"===c.id||"form1"===c.id?(c.innerHTML="<h4>Записаться на визит</h4>\n                                              <p>Ваша заявка отправлена.         Мы свяжемся с вами в ближайшее время</p>",i(c)):(h.style.display="block",[...c.elements].forEach((e=>{"name"===e.name||"phone"===e.name?e.value="":"checkbox"===e.type?e.checked=!1:e&&(e.checked=!1,null!==e.getAttribute("checked")&&(e.checked=!0))})),f&&(f.textContent="1999")),r.textContent=""})).catch((e=>{"form2"===c.id||"form1"===c.id?(c.innerHTML="<h4>Записаться на визит</h4>\n                                              <p>ошибка</p>\n                                              <p>Отправка не вышла!</p>",i(c)):(h.style.display="block",m.innerHTML="<h4>Ошибка</h4>\n                                                      <p>Отправка не вышла!</p>",m.style.cssText=" \n                          display: block;"),r.textContent=""}))}}))}));const l=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})})(),(()=>{const e=document.querySelector(".top-menu"),t=document.querySelector(".menu-button").querySelector("img"),o=document.querySelector(".popup-menu"),n=document.querySelectorAll("section"),s=document.getElementById("totop"),i=()=>{const t=document.documentElement.clientWidth,o=document.documentElement.scrollTop,i=n[1].getBoundingClientRect().top;t<768&&o>200?e.classList.add("menu-fix"):e.classList.remove("menu-fix"),i<window.innerHeight?s.style.display="block":s.style.display="none"};i(),window.addEventListener("resize",i),window.addEventListener("scroll",i),t.addEventListener("click",(()=>{o.style.display="flex"})),o.addEventListener("click",(e=>{e.target.matches("a, img")&&(o.style.display="none")}))})(),(()=>{const e=document.getElementById("card_order"),t=document.getElementById("price-total"),o=e.querySelector(".price input");let n="1",s="mozaika",i=!1;if(t){e.addEventListener("click",(e=>{let t=e.target;t.matches("input")&&t.closest(".time")?n=t.value:t.matches("input")&&t.closest(".club")&&(s=t.value),r(n,s,i)})),o.addEventListener("input",(()=>{i="ТЕЛО2019"===o.value,r(n,s,i)}));const r=(e="1",o="mozaika",n=!1)=>{let s;if("mozaika"===o)switch(e){case"1":s=1999;break;case"6":s=9900;break;case"9":s=13900;break;case"12":s=19900}else if("schelkovo"===o)switch(e){case"1":s=2999;break;case"6":s=14990;break;case"9":s=21990;break;case"12":s=24990}n&&(s*=.7),t.textContent=Math.ceil(s)};r()}})(),(()=>{const e=document.getElementById("clubs-list"),t=document.querySelector("body"),o=document.querySelector(".open-popup"),n=document.getElementById("free_visit_form"),s=document.querySelectorAll(".popup"),i=document.getElementById("gift"),r=document.getElementById("callback_form"),l=document.querySelector(".fixed-gift");t.addEventListener("click",(t=>{const s=t.target,c=s.closest("#choose_club"),a=s.closest(".callback-btn-popup");if(!s.contains(c)||"none"!==e.style.display&&""!==e.style.display?e.style.display="none":e.style.display="block",s.contains(o)&&(n.style.display="block"),l){const e=l.querySelector("img");s.contains(e)&&(l.style.display="none",i.style.display="block")}s.contains(a)&&(r.style.display="block")})),s.forEach((e=>{e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("close_icon")||o.classList.contains("close-btn")?e.style.display="none":(o=o.closest(".form-content"),o||(e.style.display="none"))}))}))})(),(()=>{try{const e=document.getElementById("totop"),t=document.querySelector("#clubs > .wrapper"),o=document.querySelector(".breadcrumbs");let n;window.addEventListener("scroll",(()=>{t&&(n=t.getBoundingClientRect().top),o&&(n=o.getBoundingClientRect().top),e.style.display=n<=100?"block":"none"}))}catch(e){console.warn("windowScroll.js",e)}})(),new class{constructor({main:e,wrap:t,next:o,prev:n,infinity:s=!1,position:i=0,slidesToShow:r=5,responsive:l=[]}){this.main=document.querySelector(e),this.wrap=document.querySelector(t),this.extraBlock=document.querySelector(".extra-block"),this.slides=this.extraBlock.querySelectorAll(".slide"),this.next=document.querySelector(o),this.prev=document.querySelector(n),this.slidesToShow=r,this.options={position:i,widthSlide:Math.floor(100/this.slidesToShow),infinity:s},this.responsive=l}init(){this.addStyle(),this.controlSlider(),this.responsive&&this.responseInit()}addStyle(){let e=document.getElementById("sliderCarusel-style");e||(e=document.createElement("style"),e.id="sliderCarousel-style"),e.textContent=`\n        .services-slider {\n                overflow: hidden !important\n            }\n            .extra-block {\n                display: flex !important;\n                transition: transform 0.5s;\n                will-change: transform;\n            }\n            .extra-block .slide {\n                flex: 0 0 ${this.options.widthSlide}% !important;\n                margin: auto 0 !important;\n            }\n        `,document.head.appendChild(e),this.extraBlock.style.transform=`translateX(-${this.options.position*this.options.widthSlide}%)`}controlSlider(){this.prev.addEventListener("click",this.prevSlider.bind(this)),this.next.addEventListener("click",this.nextSlider.bind(this))}prevSlider(){(this.options.infinity||this.options.position>0)&&(--this.options.position,this.options.position<0&&(this.options.position=this.slides.length-this.slidesToShow),this.extraBlock.style.transform=`translateX(-${this.options.position*this.options.widthSlide}%)`)}nextSlider(){(this.options.infinity||this.options.position<this.slides.length-this.slidesToShow)&&(++this.options.position,this.options.position>this.slides.length-this.slidesToShow&&(this.options.position=0),this.extraBlock.style.transform=`translateX(-${this.options.position*this.options.widthSlide}%)`)}responseInit(){const e=this.slidesToShow,t=this.responsive.map((e=>e.breakpoint)),o=Math.max(...t),n=()=>{const n=document.documentElement.clientWidth;if(n<o)for(let e=0;e<t.length;e++)n<t[e]&&(this.slidesToShow=this.responsive[e].slideToShow,this.options.widthSlide=Math.floor(100/this.slidesToShow),this.addStyle());else this.slidesToShow=e,this.options.widthSlide=Math.floor(100/this.slidesToShow),this.addStyle()};n(),window.addEventListener("resize",n)}}({prev:"#arrow-left",next:"#arrow-right",responsive:[{breakpoint:1024,slideToShow:3},{breakpoint:576,slideToShow:1}]}).init(),(()=>{const e=document.getElementById("gallery"),t=e.querySelectorAll(".slide"),o=e.querySelector(".slider-dots"),n=document.createElement("ul");let s,i,r,l=0;o.appendChild(n);for(let e=0;e<t.length;e++)s=document.createElement("li"),s.classList.add("li"),i=document.createElement("button"),i.classList.add("portfolio-btn"),s.appendChild(i),n.appendChild(s);const c=document.querySelectorAll(".li"),a=document.querySelectorAll(".portfolio-btn");c[0].classList.add("slick-active");const d=(e,t,o)=>{e[t].classList.remove(o)},p=(e,t,o)=>{e[t].classList.add(o)},h=()=>{d(c,l,"slick-active"),d(t,l,"slide-active"),l++,l>=t.length&&(l=0),p(c,l,"slick-active"),p(t,l,"slide-active")},m=(e=2e3)=>{r=setInterval(h,e)};e.addEventListener("click",(e=>{e.preventDefault();const o=e.target;o.matches(".portfolio-btn, #arrow-right-gallery, #arrow-left-gallery")&&(d(c,l,"slick-active"),d(t,l,"slide-active"),o.matches("#arrow-right-gallery")?l++:o.matches("#arrow-left-gallery")?l--:o.matches(".portfolio-btn")&&a.forEach(((e,t)=>{e===o&&(l=t)})),l>=t.length?l=0:l<0&&(l=t.length-1),p(c,l,"slick-active"),p(t,l,"slide-active"))})),e.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches("#arrow-left-gallery")||e.target.matches("#arrow-right-gallery"))&&clearInterval(r)})),e.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches("#arrow-left-gallery")||e.target.matches("#arrow-right-gallery"))&&m()})),m(2e3)})(),(()=>{const e=document.querySelectorAll(".main-slider .slide");let t,o,n,s=0;e.forEach(((e,t)=>{e.style.transition="opacity .3s",e.style.opacity=0===t?"1":"0"}));const i=()=>{var t,i;(t=e)[i=s].style.opacity="0",o=setTimeout((()=>{clearTimeout(o),t[i].style.display="none"}),300),s++,s>=e.length&&(s=0),((e,t,o)=>{e[t].style.display="flex",n=setTimeout((()=>{clearTimeout(n),e[t].style.opacity="1"}),300)})(e,s)};((e=3e3)=>{t=setInterval(i,e)})()})()})();